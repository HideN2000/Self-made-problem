$N$が小さいので、かなり適当な方法でも大丈夫そうです。

$dp[i] = i(2進数n桁bitで表し、j番目のbitが1ならP[j]を因数に持ち、0なら持たない)に対するF(i)の値$

とすると、

$dp[i] = prod(dp[j] (ただし、jはiを除くiの部分集合))$


$です。これは「bit演算　部分集合全列挙」で調べるとO(3^N)で可能です。$

$答えはdp[2^N - 1]を出力すれば良いです。$

もっと早く解くこともできますが、ここでは割愛します。